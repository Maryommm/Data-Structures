import java.io.File;
import java.util.Scanner;

public class manageCustomers {

    public static Scanner scan = new Scanner (System.in);

    public static LinkedList<Customer> customers= new LinkedList<Customer> ();//List of customers
    
   //consrtuctor
   
     public manageCustomers(String fileName){
    
            try{
                File docsfile = new File(fileName);
                Scanner reader = new Scanner (docsfile);
                String line = reader.nextLine();
                
                while(reader.hasNext())
                {
                    line = reader.nextLine();
                    String [] data = line.split(","); 
                    Customer customer = new Customer(Integer.parseInt(data[0]),data[1], data[2] );
                    customers.insert(customer);
                }
                reader.close();
            }
            catch (Exception ex) {
                System.out.println(ex.getMessage());
            }
    }


    
public LinkedList<Customer> getCustomers()// to get all customers list
{
return customers;
}

public void RegisterCustomer()
{
    Customer customer = new Customer ();

    System.out.println("Enter customer ID : ");
    customer.setCustomerId(scan.nextInt());
    
    while (customerIDIsFound(customer.getCustomerId()))
    {
        System.out.println("Re-Enter agian, ID already avialable: ");
        customer.setCustomerId(scan.nextInt());
    }    
    
    System.out.println("Enter customer Name : ");
    String name = scan.nextLine();
    name = scan.nextLine();
    customer.setName(name);
    
    System.out.println("Enter customer Email : ");
    customer.setEmail(scan.nextLine());

    customers.insert(customer);
    System.out.println("The customer was successfully added");

}

public void OrderHistory(){

        if (customers.empty())
        {
            System.out.println("empty Customers data");
        }
        else
        {
            System.out.println("Enter customer ID: ");
            int customerID = scan.nextInt();
            
            boolean found = false;
            
            customers.findFirst();
            for ( int i = 0 ; i < customers.size() ; i ++ )
            {
                if (customers.retrieve().getCustomerId() == customerID)
                {
                    found = true;
                    break;
                }
                customers.findNext();
            }
            
            if (found )
            {
                LinkedList<Integer> orders = customers.retrieve().getOrders();
                if (orders.empty())
                    System.out.println("No Order History for " + customers.retrieve().getCustomerId());
                else
                {
                    System.out.println("Order History");
                    orders.findFirst();
                    for ( int u = 0 ; u < orders.size() ; u++)
                    {
                        System.out.println(orders.retrieve());
                        orders.findNext();
                    }
                 }
            }
            else
                System.out.println("No such customer ID");
        }
        
    }
    
 
    public boolean customerIDIsFound( int customerID )
    {
        boolean found = false;
        if (! customers.empty())
        {
            customers.findFirst();
            while (!customers.last())
            {
                if (customers.retrieve().getCustomerId() == customerID)
                    found = true;
                customers.findNext();
            }
            if (customers.retrieve().getCustomerId() == customerID)
                found = true;
        }
        return found ;
    }

    
  
    public Customer getCustomerID(){
   
        if (customers.empty())
        {
            System.out.println("empty Customers data");
        }
        else
        {
            System.out.println("Enter customer ID: ");
            int customerID = scan.nextInt();
            
            customers.findFirst();
            while (!customers.last())
            {
                if (customers.retrieve().getCustomerId() == customerID)
                    return customers.retrieve();
                customers.findNext();
            }
            if (customers.retrieve().getCustomerId() == customerID)
                return customers.retrieve();        
            
        }
        System.out.println("No such customer ID");
        return null;
    }

}
